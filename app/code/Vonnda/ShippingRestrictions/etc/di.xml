<?xml version="1.0"?>
<!--
/**
 * di.xml
 */
-->
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">
    <type name="Aheadworks\OneStepCheckout\Block\Checkout">
        <plugin name="shippingRestrictionsCheckoutAddressFilter" type="Vonnda\ShippingRestrictions\Plugin\Checkout\AddressFilter" sortOrder="1"/>
    </type>
    <type name="Aheadworks\OneStepCheckout\Model\Layout\Processor\AddressAttributes">
        <plugin name="shippingRestrictionsCheckoutAttributeFilter" type="Vonnda\ShippingRestrictions\Plugin\Checkout\AttributeFilter" sortOrder="1"/>
    </type>
    <type name="Magento\Checkout\Block\Checkout\DirectoryDataProcessor">
        <plugin name="shippingRestrictionsDirectoryDataProcessor" type="Vonnda\ShippingRestrictions\Plugin\Checkout\DirectoryDataProcessor" sortOrder="1"/>
    </type>
    <preference for="Magento\Customer\Model\Plugin\AllowedCountries" type="Vonnda\ShippingRestrictions\Plugin\Customer\AllowedCountries" />
    <!-- TODO: As Checkout is not gracfully handleing exceptions -->
    <!-- <type name="Vonnda\Checkout\Api\GuestPaymentInformationManagementInterface">
        <plugin name="shippingRestrictionsGuestAroundSavePaymentPlaceOrder"
                type="Vonnda\ShippingRestrictions\Plugin\Checkout\GuestPaymentInformationManagementPlugin"
                sortOrder="1"/>
    </type>
    <type name="Magento\Checkout\Api\PaymentInformationManagementInterface">
         <plugin name="shippingRestrictionsAroundSavePaymentPlaceOrder"
                 type="Vonnda\ShippingRestrictions\Plugin\Checkout\PaymentInformationManagementPlugin"
                 sortOrder="1"/>
    </type> -->
</config>
